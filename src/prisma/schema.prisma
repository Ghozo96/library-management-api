datasource db {
    provider = "mysql"
    url = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model User {
    id Int @id @default(autoincrement())
    email String @unique
    password String
    role Role @default(BORROWER)
    createdAt DateTime @default(now())
    active Boolean @default(true)
    borrower Borrower?
}

model Borrower {
    id Int @id @default(autoincrement())
    name String
    age Int
    lastBorrowedDate DateTime?
    user User @relation(fields: [userId], references: [id])
    userId Int @unique
    borrowing Borrowing[]
}

model Book {
    isbn String @id
    title String
    author String
    availableQuantity Int
    shelfLocation Int
    active Boolean @default(true)
    borrowing Borrowing[]
}

model Borrowing {
    id Int @id @default(autoincrement())
    checkedOutDate DateTime
    dueDate DateTime
    returnedDate DateTime?
    book Book @relation(fields: [bookId], references: [isbn])
    bookId String
    borrower Borrower @relation(fields: [borrowerId], references: [id])
    borrowerId Int
}

enum Role {
    BORROWER
}